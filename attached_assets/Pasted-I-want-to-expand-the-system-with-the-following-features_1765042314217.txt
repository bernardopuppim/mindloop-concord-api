I want to expand the system with the following features, implemented in a structured and integrated way.
All changes must respect the existing architecture, database schema, and frontend patterns.
Do not remove any existing functionality. Add only the required modules and extend existing ones when necessary.

ğŸ”µ 1. FULL AUDIT TRAIL (Auditoria Completa)

Implement a full audit logging system that records every CREATE, UPDATE, and DELETE operation performed by any user.

Requirements:

Create a table audit_logs with:

id

user_id

action (â€œCREATEâ€, â€œUPDATEâ€, â€œDELETEâ€)

entity (â€œemployeeâ€, â€œpostâ€, â€œallocationâ€, â€œoccurrenceâ€, â€œdocumentâ€, etc.)

entity_id

timestamp

diff_before (JSON)

diff_after (JSON)

Wrap all database write operations with an audit logger.

Add a UI page under Admin Settings â†’ â€œAuditoriaâ€.

Allow filtering by:

user

entity

date range

action

Provide CSV export.

ğŸ”µ 2. LGPD LOGGING (Acesso a Dados SensÃ­veis)

Implement basic LGPD compliance logging for sensitive data access.

Requirements:

Create table lgpd_logs with:

id

user_id

entity

entity_id

purpose (â€œvisualizaÃ§Ã£oâ€, â€œediÃ§Ã£oâ€, etc.)

timestamp

Log automatic entries whenever:

an employee profile is viewed

documents with personal data are accessed

allocations containing employee identifiers are viewed

Add Admin UI section: â€œLogs LGPDâ€

filters for user, entity, date

CSV export

Do NOT enforce consent workflows now. Only logging.

ğŸ”µ 3. PREVISTO Ã— REALIZADO MODULE (Contract Performance Analysis)

Add a module that compares:

quantidade prevista de profissionais por posto (from Service Posts)

x

quantidade realmente alocada no perÃ­odo (from allocations)

Requirements:

Extend Service Posts to include:

quantidade_prevista

dias_previstos (if not present)

Create backend function:
calculateContractPerformance(month, year) returning:

previsto_total

realizado_total

percentual_realizado

gaps_per_posto

tendÃªncia (Ãºltimos 3 meses)

Create UI page â€œPrevisto Ã— Realizadoâ€ under Reports.

Include charts (bars + line trend).

Include CSV export.

ğŸ”µ 4. DOCUMENT MANAGEMENT (Incremental Improvements)

Enhance the existing Documents module.

Add fields:

categoria (Atestado, CertidÃ£o, RelatÃ³rio Mensal, EvidÃªncia, Treinamento, Outros)

mes_referencia

observacoes

data_validade (optional, used for alerts)

Implement:

Filters by category, month, validade

â€œDocumentos Vencidosâ€ and â€œExpirando em 30 diasâ€ sections

Ability to re-upload document versions

Cleaner UI with grouped sections per employee/post

Add missing document checklist per posto (from Anexo 1B categories)

ğŸ”µ 5. FÃ‰RIAS & LICENÃ‡AS MODULE

Create a simple but complete module for managing vacation and leave periods.

Requirements:

Table ferias_licencas with:

id

employee_id

tipo (â€œFÃ©riasâ€, â€œLicenÃ§a mÃ©dicaâ€, â€œLicenÃ§a nÃ£o remuneradaâ€, â€œOutrosâ€)

data_inicio

data_fim

observacoes

CRUD interface under Employees â†’ â€œFÃ©rias/LicenÃ§asâ€.

Automatically mark the employeeâ€™s allocation status as â€œEm FÃ©riasâ€ or â€œLicenÃ§aâ€ during the period.

Dashboard card showing:

funcionÃ¡rios em fÃ©rias hoje

prÃ³ximos perÃ­odos agendados

histÃ³rico dos Ãºltimos 6 meses

ğŸ”§ 6. GENERAL REQUIREMENTS

Apply migrations for all schema changes.

Ensure compatibility with existing data.

Do not break reports or dashboard.

After implementation, provide a summary of:

updated files

new tables

migrations

new components

testing instructions